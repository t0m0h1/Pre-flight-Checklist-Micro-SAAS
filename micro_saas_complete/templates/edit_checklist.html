{% extends "base.html" %}
{% block content %}
  <h3>{% if checklist %}Edit checklist{% else %}New checklist{% endif %}</h3>
  <form method="post">
    {{ form.hidden_tag() }}
    <div class="mb-3">
      {{ form.title.label }} {{ form.title(class="form-control") }}
    </div>
    <div class="mb-3">
      {{ form.description.label }} {{ form.description(class="form-control", rows=3) }}
    </div>
    <div class="form-check mb-3">
      {{ form.public(class="form-check-input") }} {{ form.public.label }}
    </div>
    <button class="btn btn-primary">{{ form.submit.label }}</button>
  </form>

  {% if checklist %}
    <hr/>
    <h4>Items</h4>
    <form method="post" action="{{ url_for('add_item', checklist_id=checklist.id) }}">
      {{ item_form.hidden_tag() }}
      <div class="input-group mb-3">
        {{ item_form.text(class="form-control", placeholder="e.g., Check battery level") }}
        <button class="btn btn-outline-secondary" type="submit">{{ item_form.submit.label }}</button>
      </div>
    </form>
    <ul class="list-group">
      {% for it in items %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
          {{ loop.index }}. {{ it.text }}
          <form method="post" action="{{ url_for('delete_item', checklist_id=checklist.id, item_id=it.id) }}">
            <button class="btn btn-sm btn-danger">Delete</button>
          </form>
        </li>
      {% endfor %}
    </ul>
    <div class="mt-3">
      <a class="btn btn-success" href="{{ url_for('download_checklist', checklist_id=checklist.id) }}">Download PDF</a>
    </div>
  {% endif %}
{% endblock %}
